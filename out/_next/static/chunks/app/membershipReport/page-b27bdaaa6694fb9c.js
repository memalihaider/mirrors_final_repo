(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1245],{28883:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},33109:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},59101:(e,t,a)=>{Promise.resolve().then(a.bind(a,77112))},69037:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},69074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},77112:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95155),l=a(12115),i=a(35317),r=a(56104),n=a(38274),d=a(33109),c=a(91788),m=a(19946);let o=(0,m.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var h=a(69037),p=a(71007),x=a(28883);let y=(0,m.A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),u=(0,m.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var b=a(69074);let N=(0,m.A)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var j=a(931);function v(){let[e,t]=(0,l.useState)([]),[a,m]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,i.rJ)(r.db,"userMemberships"),a=(0,i.P)(e,(0,i.My)("createdAt","desc")),s=(0,i.aQ)(a,e=>{t(e.docs.map(e=>({id:e.id,...e.data()}))),m(!1)});return()=>s()},[]),e.length,new Set(e.map(e=>e.userId)).size,new Set(e.map(e=>e.membershipName)).size,(0,s.jsx)(j.A,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-600 rounded-xl shadow-lg",children:(0,s.jsx)(d.A,{className:"w-8 h-8 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Membership Reports"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Track and analyze user membership achievements"})]})]}),(0,s.jsxs)("button",{onClick:()=>{if(0===e.length)return void alert("No data to export");let t=new Blob([["User Name,Email,Membership ID,Membership Name,Loyalty Points,Total Spending,Achieved At,Created At,Updated At",...e.map(e=>{var t,a,s,l,i;return[e.userName||"Unknown User",e.userEmail,e.membershipId||"-",e.membershipName,null!=(l=e.loyaltyPoints)?l:0,null!=(i=e.totalSpending)?i:0,(null==(t=e.achievedAt)?void 0:t.toDate)?e.achievedAt.toDate().toLocaleString():"-",(null==(a=e.createdAt)?void 0:a.toDate)?e.createdAt.toDate().toLocaleString():"-",(null==(s=e.updatedAt)?void 0:s.toDate)?e.updatedAt.toDate().toLocaleString():"-"]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","membership-reports-".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)},disabled:a||0===e.length,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg hover:from-pink-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Export CSV"})]})]})}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Membership Records"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete list of user memberships and achievements"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:a?(0,s.jsxs)("div",{className:"p-16 flex flex-col items-center justify-center",children:[(0,s.jsx)(o,{className:"w-8 h-8 text-pink-600 animate-spin mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading membership reports..."})]}):0===e.length?(0,s.jsxs)("div",{className:"p-16 text-center",children:[(0,s.jsx)(h.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No membership reports yet"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Membership achievements will appear here once users start earning them."})]}):(0,s.jsxs)(n.P.table,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-pink-600 to-purple-600 text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 inline mr-2"})," User"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 inline mr-2"})," Email"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(y,{className:"w-4 h-4 inline mr-2"})," Membership ID"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 inline mr-2"})," Membership"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(u,{className:"w-4 h-4 inline mr-2"})," Loyalty Points"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(u,{className:"w-4 h-4 inline mr-2"})," Total Spending"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(b.A,{className:"w-4 h-4 inline mr-2"})," Achieved At"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(b.A,{className:"w-4 h-4 inline mr-2"})," Created At"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(N,{className:"w-4 h-4 inline mr-2"})," Updated At"]})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map((e,t)=>{var a,l,i,r,d,c;return(0,s.jsxs)(n.P.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-gradient-to-r hover:from-pink-50 hover:to-purple-50 transition-all duration-200",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:e.userName||"Unknown"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.userEmail}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.membershipId||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.membershipName}),(0,s.jsx)("td",{className:"px-6 py-4",children:null!=(d=e.loyaltyPoints)?d:0}),(0,s.jsxs)("td",{className:"px-6 py-4",children:["AED",null!=(c=null==(a=e.totalSpending)?void 0:a.toFixed(2))?c:"0.00"]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(null==(l=e.achievedAt)?void 0:l.toDate)?e.achievedAt.toDate().toLocaleString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(null==(i=e.createdAt)?void 0:i.toDate)?e.createdAt.toDate().toLocaleString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(null==(r=e.updatedAt)?void 0:r.toDate)?e.updatedAt.toDate().toLocaleString():"-"})]},e.id)})})]})})]})]})})})}},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{e.O(0,[9135,7210,1748,6061,9323,931,8441,5964,7358],()=>e(e.s=59101)),_N_E=e.O()}]);