(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5812],{246:(e,t,s)=>{Promise.resolve().then(s.bind(s,5373))},5373:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var r=s(95155),a=s(12115),i=s(17580),l=s(53311),o=s(55670),n=s(12318),d=s(17951),c=s(54416),m=s(47924),u=s(29869),h=s(28883),x=s(19420),p=s(62525),g=s(35317),v=s(56104);let f=async function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let a=0;a<=s;a++)try{return await e()}catch(i){if(t=i,a===s)throw t;let e=r*Math.pow(2,a);await new Promise(t=>setTimeout(t,e))}throw t},b=!0,y="mirror_beauty_customers_cache",w="mirror_beauty_customers_cache_timestamp",j="customers",N=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2?arguments[2]:void 0;try{if(!(0,v.Gg)()||!v.db)return{success:!1,error:"Firebase is not configured. Please set up your Firebase environment variables."};if(!(b&&navigator.onLine))return{success:!1,error:"No network connection available"};let a=async()=>{let r=(0,g.P)((0,g.rJ)(v.db,j),(0,g.My)("createdAt","desc"));(null==e?void 0:e.status)&&"all"!==e.status&&(r=(0,g.P)(r,(0,g._M)("status","==",e.status))),(null==e?void 0:e.membershipTier)&&"all"!==e.membershipTier&&(r=(0,g.P)(r,(0,g._M)("membershipTier","==",e.membershipTier))),(null==e?void 0:e.branch)&&(r=(0,g.P)(r,(0,g._M)("preferences.preferredBranch","==",e.branch))),r=(0,g.P)(r,(0,g.AB)(t)),s&&(r=(0,g.P)(r,(0,g.HM)(s)));let a=await (0,g.GG)(r),i=[];return a.forEach(e=>{var t,s,r,a,l;let o=e.data();i.push({id:e.id,...o,createdAt:(null==(t=o.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(s=o.updatedAt)?void 0:s.toDate())||new Date,dateOfBirth:null==(r=o.dateOfBirth)?void 0:r.toDate(),visitHistory:{...o.visitHistory,lastVisit:null==(l=o.visitHistory)||null==(a=l.lastVisit)?void 0:a.toDate()}})}),{customers:i,lastDoc:a.docs[a.docs.length-1],hasMore:a.docs.length===t}},i=await f(a,2,1e3);var r=i.customers;try{let e={customers:r,timestamp:Date.now()};localStorage.setItem(y,JSON.stringify(e)),localStorage.setItem(w,Date.now().toString())}catch(e){console.warn("Failed to save customers to cache")}return{success:!0,data:i}}catch(t){console.error("Error getting customers:",t),(e=>{var t,s;if(!e)return!1;let r=(null==(t=e.message)?void 0:t.toLowerCase())||"",a=(null==(s=e.code)?void 0:s.toLowerCase())||"";return r.includes("network")||r.includes("fetch")||r.includes("connection")||r.includes("timeout")||a.includes("unavailable")||a.includes("deadline-exceeded")||a.includes("network-error")})(t)&&(b=!1);let e=(()=>{try{let e=localStorage.getItem(y),t=localStorage.getItem(w);if(!e||!t)return null;if(Date.now()-parseInt(t)>3e5)return(()=>{try{localStorage.removeItem(y),localStorage.removeItem(w)}catch(e){console.warn("Failed to clear customers cache")}})(),null;return JSON.parse(e).customers.map(e=>{var t;return{...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth):void 0,visitHistory:{...e.visitHistory,lastVisit:(null==(t=e.visitHistory)?void 0:t.lastVisit)?new Date(e.visitHistory.lastVisit):void 0}}})}catch(e){return console.warn("Failed to load customers from cache"),null}})();if(e)return console.warn("Using cached customer data due to connection issues"),{success:!0,data:{customers:e,lastDoc:void 0,hasMore:!1}};return{success:!1,error:t instanceof Error?t.message:"Failed to get customers"}}},k=async e=>{try{if(!(0,v.Gg)()||!v.db)return{success:!1,error:"Firebase is not configured. Please set up your Firebase environment variables."};let t=[],s=(0,g.P)((0,g.rJ)(v.db,j),(0,g._M)("name",">=",e),(0,g._M)("name","<=",e+""),(0,g.AB)(20));(await (0,g.GG)(s)).forEach(e=>{var s,r,a,i,l;let o=e.data();t.push({id:e.id,...o,createdAt:(null==(s=o.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,dateOfBirth:null==(a=o.dateOfBirth)?void 0:a.toDate(),visitHistory:{...o.visitHistory,lastVisit:null==(l=o.visitHistory)||null==(i=l.lastVisit)?void 0:i.toDate()}})});let r=(0,g.P)((0,g.rJ)(v.db,j),(0,g._M)("email",">=",e),(0,g._M)("email","<=",e+""),(0,g.AB)(20));return(await (0,g.GG)(r)).forEach(e=>{var s,r,a,i,l;let o=e.data(),n={id:e.id,...o,createdAt:(null==(s=o.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,dateOfBirth:null==(a=o.dateOfBirth)?void 0:a.toDate(),visitHistory:{...o.visitHistory,lastVisit:null==(l=o.visitHistory)||null==(i=l.lastVisit)?void 0:i.toDate()}};t.find(e=>e.id===n.id)||t.push(n)}),{success:!0,data:t}}catch(e){return console.error("Error searching customers:",e),{success:!1,error:e instanceof Error?e.message:"Failed to search customers"}}},C=async e=>{try{let t=g.Dc.now(),s={...e,dateOfBirth:e.dateOfBirth?g.Dc.fromDate(new Date(e.dateOfBirth)):null,visitHistory:{totalVisits:0,totalSpent:0,favoriteServices:[]},loyaltyPoints:0,membershipTier:"bronze",status:"active",tags:e.tags?e.tags.split(",").map(e=>e.trim()):[],createdAt:t,updatedAt:t};Object.keys(s).forEach(e=>{void 0===s[e]&&delete s[e]});let r=await (0,g.gS)((0,g.rJ)(v.db,j),s);return{success:!0,data:r.id}}catch(e){return console.error("Error creating customer:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create customer"}}},A=async e=>{try{if(!e)return{success:!1,error:"Customer ID is required"};let t=(0,g.H9)(v.db,j,e);return await (0,g.kd)(t),{success:!0,data:void 0}}catch(e){return console.error("Error deleting customer:",e),{success:!1,error:e instanceof Error?e.message:"Failed to delete customer"}}},D=async()=>{try{let e=(0,g.P)((0,g.rJ)(v.db,j)),t=await (0,g.GG)(e),s=(0,g.P)((0,g.rJ)(v.db,j),(0,g._M)("status","==","active")),r=await (0,g.GG)(s),a=new Date;a.setDate(1),a.setHours(0,0,0,0);let i=(0,g.P)((0,g.rJ)(v.db,j),(0,g._M)("createdAt",">=",g.Dc.fromDate(a))),l=await (0,g.GG)(i),o=(0,g.P)((0,g.rJ)(v.db,j),(0,g.My)("visitHistory.totalSpent","desc"),(0,g.AB)(5)),n=await (0,g.GG)(o),d=[];n.forEach(e=>{var t,s,r,a,i;let l=e.data();d.push({id:e.id,...l,createdAt:(null==(t=l.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(s=l.updatedAt)?void 0:s.toDate())||new Date,dateOfBirth:null==(r=l.dateOfBirth)?void 0:r.toDate(),visitHistory:{...l.visitHistory,lastVisit:null==(i=l.visitHistory)||null==(a=i.lastVisit)?void 0:a.toDate()}})});let c={bronze:0,silver:0,gold:0,platinum:0};t.forEach(e=>{let t=e.data().membershipTier||"bronze";c[t]++});let m={totalCustomers:t.size,activeCustomers:r.size,newCustomersThisMonth:l.size,topSpenders:d,membershipDistribution:c};return{success:!0,data:m}}catch(e){return console.error("Error getting customer stats:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get customer statistics"}}},S=async e=>{try{let t=0,s=0,r=[],a=[];for(let i=0;i<e.length;i++){let l=e[i];try{let e=await C(l);t++,a.push({customerId:e.data,customer:l,row:i+1})}catch(t){s++;let e=t instanceof Error?t.message:"Unknown error";r.push("Row ".concat(i+1,": ").concat(e)),a.push({error:e,customer:l,row:i+1})}}return{successful:t,failed:s,errors:r,data:a}}catch(e){throw console.error("Error bulk importing customers:",e),e}};var _=s(931),P=s(91788),E=s(64261),B=s(40646),I=s(85339),F=s(3925);let M=async e=>new Promise((t,s)=>{let r=new FileReader;r.onload=r=>{try{var a;let s,i=null==(a=r.target)?void 0:a.result,l=(s=e.name.endsWith(".csv")?F.LF(i,{type:"binary"}):F.LF(i,{type:"array"})).SheetNames[0],o=s.Sheets[l],n=F.Wp.sheet_to_json(o,{header:1}),d=H(n);t(d)}catch(e){s(Error("Failed to parse file"))}},r.onerror=()=>s(Error("Failed to read file")),e.name.endsWith(".csv")?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}),H=e=>{if(0===e.length)return[];let t=e[0].map(e=>String(e).toLowerCase().trim().replace(/\s+/g,"_")),s=[];for(let r=1;r<e.length;r++){let a=e[r];if(a&&0!==a.length)try{let e=T(t,a);e.name&&e.email&&s.push(e)}catch(e){console.warn("Error parsing row ".concat(r+1))}}return s},T=(e,t)=>{var s,r,a,i,l,o,n,d;let c=s=>{for(let r of s){let s=e.findIndex(e=>e.includes(r));if(-1!==s&&t[s])return String(t[s]).trim()}return""},m=e=>["yes","true","1","y","on"].includes(c(e).toLowerCase()),u={name:c(["name","customer_name","full_name","client_name"]),email:c(["email","email_address","e_mail"]),phone:c(["phone","phone_number","mobile","contact","telephone"]),dateOfBirth:(e=>{let t=c(e);if(!t)return"";try{if(!isNaN(Number(t))&&Number(t)>25e3){let e=F.tF.parse_date_code(Number(t));return"".concat(e.y,"-").concat(String(e.m).padStart(2,"0"),"-").concat(String(e.d).padStart(2,"0"))}let e=new Date(t);if(!isNaN(e.getTime()))return e.toISOString().split("T")[0]}catch(e){console.warn("Error parsing date:",t)}return""})(["date_of_birth","dob","birth_date","birthday"]),gender:c(["gender","sex"]),address:{street:c(["address","street","street_address","address_line_1"]),city:c(["city","town"]),state:c(["state","province","region"]),zipCode:c(["zip","zip_code","postal_code","postcode"])},preferences:{preferredBranch:c(["branch","preferred_branch","location"]),allergies:c(["allergies","allergy","medical_notes"]),skinType:c(["skin_type","skin"])||"normal",notes:c(["notes","comments","remarks","additional_info"])},marketingConsent:{email:m(["email_marketing","email_consent","marketing_email"]),sms:m(["sms_marketing","sms_consent","text_marketing"]),phone:m(["phone_marketing","call_consent","phone_consent"])},tags:c(["tags","categories","labels"])};return(null==(s=u.address)?void 0:s.street)||(null==(r=u.address)?void 0:r.city)||(null==(a=u.address)?void 0:a.state)||(null==(i=u.address)?void 0:i.zipCode)||(u.address=void 0),(null==(l=u.preferences)?void 0:l.preferredBranch)||(null==(o=u.preferences)?void 0:o.allergies)||(null==(n=u.preferences)?void 0:n.notes)||(u.preferences={skinType:(null==(d=u.preferences)?void 0:d.skinType)||"normal"}),u},O=async e=>{try{let t=await M(e);if(0===t.length)return{success:!1,totalRows:0,successfulImports:0,failedImports:0,errors:[{row:0,error:"No valid customer data found in file"}]};let s=await S(t),r=s.successful,a=s.failed,i=s.errors.map((e,s)=>{let r=e.match(/Row (\d+):/),a=r?parseInt(r[1]):s+2,i=e.replace(/Row \d+: /,"");return{row:a,error:i,data:t[a-2]}});return{success:0===a,totalRows:t.length,successfulImports:r,failedImports:a,errors:i}}catch(e){return{success:!1,totalRows:0,successfulImports:0,failedImports:0,errors:[{row:0,error:e instanceof Error?e.message:"Unknown error occurred"}]}}},L=()=>{let e=new Blob([[["Name","Email","Phone","Date of Birth","Gender","Street Address","City","State","ZIP Code","Preferred Branch","Allergies","Skin Type","Notes","Email Marketing","SMS Marketing","Phone Marketing","Tags"],["Jane Smith","jane.smith@email.com","+1-555-0123","1990-05-15","female","123 Beauty Lane","Los Angeles","CA","90210","Downtown Branch","None","combination","Prefers evening appointments","yes","no","yes","VIP, Regular"],["John Doe","john.doe@email.com","+1-555-0124","1985-12-03","male","456 Salon Street","Beverly Hills","CA","90211","Beverly Hills Branch","Sensitive to fragrances","sensitive","First-time customer","yes","yes","no","New Customer"]].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");if(void 0!==t.download){let s=URL.createObjectURL(e);t.setAttribute("href",s),t.setAttribute("download","customer_import_template.csv"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}};function z(e){let{onImportComplete:t,onClose:s}=e,[i,l]=(0,a.useState)(null),[o,n]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(!1),p=(0,a.useRef)(null),g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},v=e=>{let t=(e=>{let t=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","application/csv"].includes(e.type),s=[".xlsx",".xls",".csv"].some(t=>e.name.toLowerCase().endsWith(t));return t||s?e.size>0xa00000?{valid:!1,error:"File size must be less than 10MB"}:{valid:!0}:{valid:!1,error:"Please upload a valid Excel (.xlsx, .xls) or CSV (.csv) file"}})(e);if(!t.valid)return void alert(t.error);l(e),m(null)},f=async()=>{if(i){n(!0);try{let e=await O(i);m(e),e.success&&e.successfulImports>0&&(null==t||t(e))}catch(e){console.error("Import error:",e),m({success:!1,totalRows:0,successfulImports:0,failedImports:0,errors:[{row:0,error:"Failed to import file"}]})}finally{n(!1)}}},b=()=>{l(null),m(null),p.current&&(p.current.value="")};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Import Customer Data"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(c.A,{className:"w-6 h-6"})})]}),d?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg border ".concat(d.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[d.success?(0,r.jsx)(B.A,{className:"w-5 h-5 text-green-600"}):(0,r.jsx)(I.A,{className:"w-5 h-5 text-red-600"}),(0,r.jsx)("h3",{className:"font-semibold ".concat(d.success?"text-green-900":"text-red-900"),children:d.success?"Import Completed Successfully":"Import Completed with Errors"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Total Rows:"}),(0,r.jsx)("span",{className:"ml-2",children:d.totalRows})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-green-700",children:"Successful:"}),(0,r.jsx)("span",{className:"ml-2",children:d.successfulImports})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-red-700",children:"Failed:"}),(0,r.jsx)("span",{className:"ml-2",children:d.failedImports})]})]})]}),d.errors.length>0&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-red-900 mb-3",children:"Import Errors"}),(0,r.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:d.errors.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("span",{className:"font-medium text-red-800",children:["Row ",e.row,":"]}),(0,r.jsx)("span",{className:"ml-2 text-red-700",children:e.error})]},t))})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:b,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Import Another File"}),(0,r.jsx)("button",{onClick:s,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors",children:"Close"})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-pink-50 border border-pink-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-pink-900 mb-2",children:"Import Instructions"}),(0,r.jsxs)("ul",{className:"text-sm text-pink-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Supported formats: Excel (.xlsx, .xls) and CSV (.csv)"}),(0,r.jsx)("li",{children:"• Maximum file size: 10MB"}),(0,r.jsx)("li",{children:"• First row should contain column headers"}),(0,r.jsx)("li",{children:"• Required fields: Name, Email"}),(0,r.jsx)("li",{children:"• Optional fields: Phone, Address, Preferences, etc."})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Need a template?"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Download our sample CSV file to see the expected format"})]}),(0,r.jsxs)("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors",children:[(0,r.jsx)(P.A,{className:"w-4 h-4"}),"Download Template"]})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(h?"border-pink-400 bg-pink-50":i?"border-green-400 bg-green-50":"border-gray-300 hover:border-pink-400"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&v(e.dataTransfer.files[0])},children:[(0,r.jsx)("input",{ref:p,type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{e.target.files&&e.target.files[0]&&v(e.target.files[0])},className:"hidden"}),i?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(E.A,{className:"w-12 h-12 text-green-600 mx-auto"}),(0,r.jsx)("p",{className:"font-medium text-green-900",children:i.name}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:[(i.size/1024/1024).toFixed(2)," MB"]}),(0,r.jsx)("button",{onClick:b,className:"text-sm text-pink-600 hover:text-pink-700 underline",children:"Choose different file"})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.A,{className:"w-12 h-12 text-gray-400 mx-auto"}),(0,r.jsxs)("p",{className:"text-lg font-medium text-gray-900",children:["Drop your file here or"," ",(0,r.jsx)("button",{onClick:()=>{var e;return null==(e=p.current)?void 0:e.click()},className:"text-pink-600 hover:text-pink-700 underline",children:"browse"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Supports Excel (.xlsx, .xls) and CSV (.csv) files"})]})]}),i&&(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:b,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:f,disabled:o,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),"Import Data"]})})]})]})]})})}var G=s(38274),V=s(60760);function R(){let[e,t]=(0,a.useState)([]),[s,g]=(0,a.useState)([]),[v,f]=(0,a.useState)(!0),[b,y]=(0,a.useState)(""),[w]=(0,a.useState)({status:"all"}),[j,C]=(0,a.useState)(!1),[S,P]=(0,a.useState)(!1),[E,B]=(0,a.useState)({totalCustomers:0,activeCustomers:0,newCustomersThisMonth:0,topSpenders:[],membershipDistribution:{bronze:0,silver:0,gold:0,platinum:0}}),I=(0,a.useCallback)(async()=>{f(!0);try{let e=await N(w);e.success&&e.data?(t(e.data.customers),g(e.data.customers),P(e.fromCache||!1)):console.error("Failed to fetch customers:",e.error)}catch(e){console.error("Error fetching customers:",e)}finally{f(!1)}},[w]),F=(0,a.useCallback)(async()=>{try{let e=await D();e.success&&e.data?B(e.data):console.error("Failed to fetch stats:",e.error)}catch(e){console.error("Error fetching stats:",e)}},[]),M=async t=>{if(y(t),!t.trim())return void g(e);try{let s=await k(t);if(s.success&&s.data)g(s.data);else{let s=e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.phone.includes(t));g(s)}}catch(s){console.error("Error searching customers:",s),g(e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.phone.includes(t)))}},H=async e=>{if(confirm("Are you sure you want to delete this customer?"))try{let t=await A(e);t.success?(I(),F()):console.error("Failed to delete customer:",t.error)}catch(e){console.error("Error deleting customer:",e)}};(0,a.useEffect)(()=>{I(),F()},[w,I,F]);let T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},O={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},L={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:.4}}};return(0,r.jsx)(_.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-rose-100 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-pink-200/30 to-purple-200/30 rounded-full blur-3xl animate-pulse"}),(0,r.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-rose-200/30 to-pink-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-100/20 to-pink-100/20 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,r.jsxs)(G.P.div,{className:"relative z-10 p-4",variants:T,initial:"hidden",animate:"visible",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(G.P.div,{className:"mb-8 text-center",variants:O,children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl shadow-lg",children:(0,r.jsx)(i.A,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-pink-600 via-purple-600 to-rose-600 bg-clip-text text-transparent",children:"Customer Management"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4 text-pink-500"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"Manage your beauty salon customers with elegance"}),(0,r.jsx)(l.A,{className:"h-4 w-4 text-purple-500"})]})]})]})}),(0,r.jsxs)(G.P.div,{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",variants:T,children:[(0,r.jsxs)(G.P.div,{className:"group relative overflow-hidden",variants:L,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/10 to-purple-500/10 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 hover:shadow-2xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Total Customers"}),(0,r.jsx)(G.P.p,{className:"text-3xl font-bold text-gray-900",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.5},children:E.totalCustomers})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,r.jsx)(i.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full animate-pulse"})]})]})})]}),(0,r.jsxs)(G.P.div,{className:"group relative overflow-hidden",variants:L,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 hover:shadow-2xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Active Customers"}),(0,r.jsx)(G.P.p,{className:"text-3xl font-bold text-green-600",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.5},children:E.activeCustomers})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,r.jsx)(o.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full animate-pulse"})]})]})})]}),(0,r.jsxs)(G.P.div,{className:"group relative overflow-hidden",variants:L,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 hover:shadow-2xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"New This Month"}),(0,r.jsx)(G.P.p,{className:"text-3xl font-bold text-blue-600",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.7,duration:.5},children:E.newCustomersThisMonth})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,r.jsx)(n.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full animate-pulse"})]})]})})]}),(0,r.jsxs)(G.P.div,{className:"group relative overflow-hidden",variants:L,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 hover:shadow-2xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Platinum Members"}),(0,r.jsx)(G.P.p,{className:"text-3xl font-bold text-purple-600",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.8,duration:.5},children:E.membershipDistribution.platinum})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,r.jsx)(d.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full animate-pulse"})]})]})})]})]}),(0,r.jsx)(V.N,{children:S&&(0,r.jsx)(G.P.div,{className:"mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-yellow-100 to-orange-100 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-xl shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-yellow-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Showing cached data"})]}),(0,r.jsx)("button",{onClick:()=>P(!1),className:"text-yellow-800 hover:text-yellow-900 transition-colors",children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})]})})}),(0,r.jsx)(G.P.div,{className:"mb-8",variants:O,children:(0,r.jsxs)("div",{className:"relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/40 to-white/60 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)(m.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5 group-focus-within:text-pink-500 transition-colors"}),(0,r.jsx)("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:b,onChange:e=>M(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/50 backdrop-blur-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 placeholder-gray-400"})]})}),(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsxs)(G.P.button,{onClick:()=>C(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-xl hover:from-blue-600 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),"Import Customers"]})})]})})]})}),(0,r.jsxs)(G.P.div,{className:"relative overflow-hidden",variants:O,children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/40 to-white/60 backdrop-blur-sm"}),(0,r.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50/80 to-gray-100/80 backdrop-blur-sm",children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Contact"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200/50",children:(0,r.jsx)(V.N,{children:v?(0,r.jsx)(G.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-12 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"}),(0,r.jsx)("span",{className:"text-gray-500 font-medium",children:"Loading customers..."})]})})}):0===s.length?(0,r.jsx)(G.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-12 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"h-16 w-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsx)("span",{className:"text-gray-500 font-medium",children:"No customers found"})]})})}):s.map((e,t)=>(0,r.jsxs)(G.P.tr,{className:"hover:bg-white/50 transition-all duration-200 group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:e.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900 group-hover:text-pink-600 transition-colors",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,r.jsx)(h.A,{className:"h-3 w-3"}),e.email]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[(0,r.jsx)(x.A,{className:"h-3 w-3 text-gray-400"}),e.phone]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(G.P.button,{onClick:()=>e.id&&H(e.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})})})]},e.id))})})]})})})]})]}),(0,r.jsx)(V.N,{children:j&&(0,r.jsxs)(G.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>C(!1)}),(0,r.jsx)(G.P.div,{className:"relative bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 max-w-2xl w-full max-h-[90vh] overflow-hidden",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:(0,r.jsx)(z,{onImportComplete:()=>{C(!1),I(),F()},onClose:()=>C(!1)})})]})})]})]})})}},32383:()=>{},83686:()=>{}},e=>{e.O(0,[9135,7210,3524,1748,6061,5228,9323,931,8441,5964,7358],()=>e(e.s=246)),_N_E=e.O()}]);